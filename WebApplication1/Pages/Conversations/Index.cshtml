@page
@model PMS.Pages.Conversations.IndexModel
@{
}

<div class="main-content message">
    <div class="row">
        <div class="col-12">
            <div class="box card-box">
                <div class="icon-box bg-color-4">
                    <a class="create d-flex" href="#" data-toggle="modal" data-target="#add_project">
                        <div class="icon bg-white">
                            <i class="bx bx-plus"></i>
                        </div>
                        <div class="content d-flex align-items-center">
                            <h5 class="color-white">Create New Conversation</h5>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
            <div class="row">
                <div class="col-4 col-md-12">
                    <div class="row">
                        <div class="col-12 mb-0">
                            <div class="box box-message">
                                <div class="input-group search-area">
                                    <span class="input-group-text"><a href="javascript:void(0)"><i class="bx bx-search"></i></a></span>
                                    <input type="text" class="form-control" placeholder="Search">

                                </div>
                                <div class="box-header">
                                    <h4 class="card-title">Recent Message</h4>
                                    <div class="dropdown ml-14">
                                        <a href="javascript:void(0);" class="btn-link" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fas fa-ellipsis-h"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                                            <a class="dropdown-item" href="javascript:void(0);">Edit</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="box-content">
                            <ul class="message-list">
                               
                              @*  @foreach (var item in Model.Conversations)
                               {
                                   <a href="/Conversations/?id=@item.Id">

                                 
                                   <li class="waves-effect waves-teal @(Model.currentConversation.Id == item.Id ? "active" : "")">
                                        <div class="left d-flex">
                                            <div class="avatar">
                                                <img src="/images/avatar/message-2.png" alt="">
                                                <div class="pulse-css-1"></div>
                                            </div>
                                            <div class="content">
                                                <div class="username">
                                                    <div class="name h6">
                                                        @item.Name
                                                    </div>
                                                </div>
                                                <div class="text">
                                                    <p>@item.Description</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- /.left -->

                                        <div class="clearfix"></div>
                                    </li>
                                    </a> 
                                }*@
                                <!-- /li.waves-effect -->
                                <!-- /li.waves-effect -->
                                <!-- /li.waves-effect -->
                                <!-- /li.waves-effect -->
                                <!-- /li.waves-effect -->
                                <!-- /li.waves-effect -->
                            </ul>
                                    <!-- /.message-list scroll -->
                                </div>
                                <!-- /.box-content -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-8 col-md-12">
                    <div class="box message-info">
                        <div class="box-info-messager">
                            
                            <div class="content">
                        <div class="username" style="
                                        display: flex;
                                        justify-content: space-between;
                                ">
                                    <h5 class="group-name fs-18">Elizabeth Holland</h5>
                            <div class="dropdown ml-14">
                                <a id="CurrentConversation" href="#" class="btn-link">
                                    <p class="btn btn-primary" style="
                                       margin: 0px;">Members@*<i class="fas fa-ellipsis-h"></i>*@</p>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                                    <a class="dropdown-item" href="javascript:void(0);">Edit</a>
                                </div>
                            </div>
                                </div>
                                <div class="text">
                                    <p class="group-description fs-14">Hi, Did you check the file?</p>
                                </div>
                            </div>

                        </div>
                        <!-- /.box-info-messager -->
                        <div class="divider"></div>

                        <div class="message-box">
                         @*   @foreach (var message in Model.currentConversation.Messages)
                            {
                                if(message.SenderId != Model.currentUserId){
                                    <div class="message-in">
                                        <div class="message-pic">
                                            <img src="./images/avatar/message-1.png" alt="">
                                            <div class="pulse-css-1"></div>
                                        </div>
                                        <div class="message-body">
                                            <div class="message-text">
                                                <p>@message.Text</p>
                                            </div>
                                            <div class="message-meta">
                                                <p class="mt-10">Sunday, march 17, 2021 at 2:39 PM</p>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                }
                                else {
                                    <div class="message-out">
                                        <div class="message-pic">
                                            <img src="./images/profile/profile.png" alt="">
                                            <div class="pulse-css-1"></div>
                                        </div>
                                        <div class="message-body">
                                            <div class="message-text">
                                        <p>@message.Text</p>
                                    </div>
                                            <div class="message-meta">
                                                <p class="mt-10">Sunday, march 17, 2021 at 2:45 PM</p>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                }
                            }*@

                         @*   <div class="message-in">
                                <div class="message-pic">
                                    <img src="./images/avatar/message-1.png" alt="">
                                    <div class="pulse-css-1"></div>
                                </div>
                                <div class="message-body">
                                    <div class="message-text">
                                        <p>Proin ac quam et lectus vestibulum blandit. Nunc maximus nibh at placerat tincidunt. Nam sem lacus, ornare non ante sed, ultricies fringilla massa. Ut congue, elit non tempus elementum, sem risus tincidunt diam.</p>
                                    </div>
                                    <div class="message-meta">
                                        <p class="mt-10">Sunday, march 17, 2021 at 2:39 PM</p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <!-- /.message-in -->
                            <div class="clearfix"></div>
                            <div class="message-out">
                                <div class="message-pic">
                                    <img src="./images/profile/profile.png" alt="">
                                    <div class="pulse-css-1"></div>
                                </div>
                                <div class="message-body">
                                    <div class="message-text">
                                        <p>Cras eu elit congue, placerat dui ut, tincidunt nisl. </p>
                                        <p>Duis mauris augue, efficitur eu arcu sit amet, posuere dignissim neque. Aenean enim sem, pharetra et magna sit amet, luctus</p>
                                    </div>
                                    <div class="message-meta">
                                        <p class="mt-10">Sunday, march 17, 2021 at 2:45 PM</p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <!-- /.message-out -->
                            <div class="clearfix"></div>
                            <div class="message-in">
                                <div class="message-pic">
                                    <img src="./images/avatar/message-1.png" alt="">
                                    <div class="pulse-css-1"></div>
                                </div>
                                <div class="message-body">
                                    <div class="message-text">
                                        <p>Proin ac quam et lectus vestibulum blandit. Nunc maximus nibh at placerat tincidunt. Nam sem lacus, ornare non ante sed.</p>
                                        <p>Proin ac quam et lectus vestibulum </p>
                                    </div>
                                    <div class="message-meta">
                                        <p class="mt-10">Sunday, march 17, 2021 at 2:52 PM</p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="message-in">
                                <div class="message-pic">
                                    <img src="./images/avatar/message-1.png" alt="">
                                    <div class="pulse-css-1"></div>
                                </div>
                                <div class="message-body">
                                    <div class="message-text">
                                        <p>Proin ac quam et lectus vestibulum blandit. Nunc maximus nibh at placerat tincidunt. Nam sem lacus, ornare non ante sed.</p>
                                        <p>Proin ac quam et lectus vestibulum </p>
                                    </div>
                                    <div class="message-meta">
                                        <p class="mt-10">Sunday, march 17, 2021 at 2:52 PM</p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>*@

                        </div>
                        <div class="form-chat">
                            <form action="#" method="get" accept-charset="utf-8">
                                <div class="message-form-chat">
                                    <!-- /.pin -->
                                    <span class="message-text">
                                        <textarea id="message" name="message" placeholder="Type your message..." required="required"></textarea>
                                    </span>
                                    <!-- /.message-text -->
                                    <span class="camera">
                                        <a href="#" title="">
                                            <i class="fas fa-smile"></i>
                                        </a>
                                    </span>
                                    <!-- /.camera -->
                                    <span class="icon-message">
                                        <a href="#" title="">
                                            <i class="fas fa-paperclip"></i>
                                        </a>
                                    </span>
                                    <!-- /.icon-right -->
                                    <!-- <div class="icon-mobile">
                                        <ul>
                                            <li>
                                                <a href="#" title=""><i class="fas fa-smile"></i></a>
                                            </li>
                                            <li>
                                                <a href="#" title=""><i class="fas fa-paperclip"></i></a>
                                            </li>
                                        </ul>
                                    </div> -->
                                    <!-- /.icon-right -->
                                    <span class="btn-send">
                                        <button class="waves-effect" type="button">Send <i class="fas fa-paper-plane"></i></button>
                                    </span>
                                    <!-- /.btn-send -->

                                </div>
                                <!-- /.message-form-chat -->
                                <div class="clearfix"></div>
                            </form>
                            <!-- /form -->
                        </div>
                    </div>
                </div>
            </div>

    <div id="add_project" class="modal custom-modal fade" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Conversation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Conversation Name</label>
                                    <input class="form-control" value="" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea rows="4" class="form-control" placeholder="Enter your message here"></textarea>
                        </div>
                   
                        <div class="submit-section">
                            <button class="btn btn-primary submit-btn">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>



        </div>

@section Scripts{
    <script>
        var groupId = '@Model.currentConversation.Id';
        var currentUserId = '@Model.currentUserId';
    </script>
    <script src="~/js/message/message.js">
      
    </script>
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
  
}
